{% extends "base.html" %}
{% block main %}
    <div class="max-w-3xl mx-auto p-6">
        <h1 class="text-3xl font-semibold text-center mb-6">ตั้งค่าการแจ้งเตือน</h1>
        
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4">การตั้งค่า</h2>
            <form method="post">
                {% csrf_token %}
                
                <div class="mb-4">
                    <label for="is_enabled" class="block text-lg font-medium mb-2">เปิดการแจ้งเตือน:</label>
                    <div class="flex items-center">
                        {{ form.is_enabled }}
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="interval_minutes" class="block text-lg font-medium mb-2">ช่วงเวลาการแจ้งเตือน (นาที):</label>
                    <div class="flex">
                        {{ form.interval_minutes }}
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-full mt-4">บันทึก</button>
            </form>
        </div>

        <div class="mt-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4">ประวัติการแจ้งเตือน</h2>
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th class="text-left">วันที่</th>
                        <th class="text-left">สถานะ</th>
                        <th class="text-left">ช่วงเวลา</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in notification_logs %}
                        <tr>
                            <td>{{ log.date }}</td>
                            <td>{{ log.status }}</td>
                            <td>{{ log.interval_minutes }} นาที</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

{% if message %}
    <script>
        Swal.fire({
            icon: 'success',
            title: 'บันทึกเรียบร้อยแล้ว',
            text: '{{ message }}',
            showConfirmButton: false,
            timer: 1500
        });
    </script>
{% endif %}

{% endblock %}
